

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installation &mdash; MedSegPy 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'0.0.1',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting Started with MedSegPy" href="getting_started.html" />
    <link rel="prev" title="User Guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MedSegPy
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-medsegpy-from-source">Build MedSegPy from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step-guide">Step-by-Step Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-paths-optional">Configuring Paths (optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting Started with MedSegPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="extend.html">Extend MedSegPy’s Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="datasets.html">Use Custom Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_loading.html">Use Custom Dataloaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Use Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="training.html">Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="configs.html">Use Configs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">API Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MedSegPy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">User Guide</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/install.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>We recommend using a virtual environment (Anaconda, virtualenv) to to control
package visibility. For a detailed list of requirements, see
<a class="reference external" href="https://github.com/ad12/MedSegPy/blob/master/environment.yml">environment.yml</a>.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python ≥3.6</li>
<li>tensorflow(-gpu) ≥1.8.0</li>
<li>keras ≥2.1.6</li>
<li>pydot (download via <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">pydot</span></code>)</li>
<li>graphviz (download via <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">python-graphviz</span></code>)</li>
</ul>
<p>MedSegPy supports both TensorFlow 1 and 2. For gpu
tensorflow versions, compatible cuda drivers and toolkits
must be installed. If you do not have a gpu or you are using
<code class="docutils literal notranslate"><span class="pre">tensorflow&gt;=2.0</span></code>, replace the <code class="docutils literal notranslate"><span class="pre">tensorflow-gpu</span></code> package with <code class="docutils literal notranslate"><span class="pre">tensorflow</span></code>.
More instructions about TensorFlow cuda compatibility and installation
can be found <a class="reference external" href="https://www.tensorflow.org/install/source#gpu">here</a>.</p>
<p>Install these requirements prior to installing MedSegPy.</p>
</div>
<div class="section" id="build-medsegpy-from-source">
<h2>Build MedSegPy from Source<a class="headerlink" href="#build-medsegpy-from-source" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m pip install <span class="s1">&#39;git+https://github.com/ad12/MedSegPy.git&#39;</span>
<span class="c1"># (add --user if you don&#39;t have permission)</span>

<span class="c1"># Or, to install it from a local clone (recommended):</span>
git clone https://github.com/ad12/MedSegPy.git
<span class="nb">cd</span> MedSegPy <span class="o">&amp;&amp;</span> python -m pip install -e .
</pre></div>
</div>
<p>You may need to rebuild medsegpy after reinstalling TensorFlow and/or Keras.</p>
</div>
<div class="section" id="step-by-step-guide">
<h2>Step-by-Step Guide<a class="headerlink" href="#step-by-step-guide" title="Permalink to this headline">¶</a></h2>
<p>The following instructions install MedSegPy with Python 3.7,
Tensorflow 2.3, and Keras 2.4 into an Anaconda environment.
Note gpu use with Tensorflow 2.3 requires cuda toolkit 10.1.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create conda environment</span>
conda create -n medsegpy_env <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7
conda activate medsegpy_env

<span class="c1"># Install tensorflow and keras dependencies.</span>
pip install <span class="nv">tensorflow</span><span class="o">==</span><span class="m">2</span>.3.1 <span class="nv">keras</span><span class="o">==</span><span class="m">2</span>.4.3

<span class="c1"># Install visualization dependencies</span>
conda install pydot python-graphviz

<span class="c1"># Install MedSegPy</span>
git clone https://github.com/ad12/MedSegPy.git
<span class="nb">cd</span> MedSegPy <span class="o">&amp;&amp;</span> python -m pip install -e .
</pre></div>
</div>
</div>
<div class="section" id="configuring-paths-optional">
<h2>Configuring Paths (optional)<a class="headerlink" href="#configuring-paths-optional" title="Permalink to this headline">¶</a></h2>
<p>There are two primary paths that MedSegPy uses: 1. dataset paths,
the path to the directory holding the datasets, and 2. result paths,
the path to the directory where results should be stored.</p>
<p><em><strong>Builtin Dataset Paths</strong></em></p>
<p>You can set the location for builtin datasets by
export MEDSEGPY_DATASETS=/path/to/datasets. If left unset, the default
is ./datasets relative to your current working directory.</p>
<p><em><strong>Result Paths</strong></em></p>
<p>Similarly, you can set the location for the results directory by
export MEDSEGPY_RESULTS=/path/to/results. If left unset, the default
is ./results relative to your current working directory.</p>
<p>As a shortcut, we designate the prefix <code class="docutils literal notranslate"><span class="pre">&quot;results://&quot;</span></code>
in any filepath to point to a result directory of your choosing.
For example, <code class="docutils literal notranslate"><span class="pre">&quot;results://exp1&quot;</span></code> will resolve to the path
<code class="docutils literal notranslate"><span class="pre">&quot;&lt;MEDSEGPY_RESULTS&gt;/exp1&quot;</span></code>.</p>
<p>An example of how to do this in python (i.e. without export statements) is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MEDSEGPY_DATASETS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/path/to/datasets&quot;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MEDSEGPY_RESULTS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;/path/to/results&quot;</span>

<span class="kn">import</span> <span class="nn">medsegpy.utils</span>  <span class="c1"># import implicitly registers prefixes</span>
<span class="kn">from</span> <span class="nn">fvcore.common.file_io</span> <span class="kn">import</span> <span class="n">PathManager</span>
<span class="n">PathManager</span><span class="o">.</span><span class="n">get_local_path</span><span class="p">(</span><span class="s2">&quot;results://exp1&quot;</span><span class="p">)</span>  <span class="c1"># returns &quot;/path/to/results/exp1&quot;</span>
</pre></div>
</div>
<p>You can also define your own prefixes to resolve by adding your own path handler.
This is useful if you want to use the same script to run multiple projects. See fvcore’s
<a class="reference external" href="https://github.com/facebookresearch/fvcore/blob/master/fvcore/common/file_io.py">fileio</a>
for more information.</p>
<p><em><strong>Using Clusters</strong></em>
It can often be difficult to manage multiple machines may be used.
For example, data in <code class="docutils literal notranslate"><span class="pre">machineA</span></code> could be stored at a different location
than on <code class="docutils literal notranslate"><span class="pre">machineB</span></code>, but the code you have written is visible to both machines.
In these scenarios, managing centralized code can become quite challenging
because of hardcoded paths.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">Cluster</span></code> to store our preferences for paths on different machines.
The code below saves the path preferences for each machine to a file.
Whenever these machines are detected (matched using hostname) when using MedSegPy,
the machine-specific datasets and results paths will be use.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dosma.utils.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span>

<span class="c1"># Define paths for machineA</span>
<span class="n">machineA</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="s2">&quot;machineA&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;machineA_hostname_pattern&quot;</span><span class="p">],</span> <span class="s2">&quot;path/to/machineA/datasets&quot;</span><span class="p">,</span> <span class="s2">&quot;path/to/machineA/results&quot;</span><span class="p">)</span>
<span class="n">machineA</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c1"># Define paths for machineB</span>
<span class="n">machineB</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="s2">&quot;machineB&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;machineB_hostname_pattern&quot;</span><span class="p">],</span> <span class="s2">&quot;path/to/machineB/datasets&quot;</span><span class="p">,</span> <span class="s2">&quot;path/to/machineB/results&quot;</span><span class="p">)</span>
<span class="n">machineB</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting Started with MedSegPy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, Arjun Desai.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>